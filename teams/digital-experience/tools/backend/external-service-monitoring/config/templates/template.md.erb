# <%= SERVICE_NAME_FULL %> SLO Document

> Adapted from [Google SLO Example](https://landing.google.com/sre/workbook/chapters/slo-document/)

This document describes the (reflective) SLOs for the <%= SERVICE_NAME_FULL %> external service.

|               |                |
| ------------- | -------------- |
| Status        | <%= DOC_STATUS        %> |
| Author        | <%= AUTHOR        %> |
| Changed       | <%= DATE          %> |

## Service Overview

> This section provides an overview of what data the service provides and how it can be used by teams building on VSP.

| Service Name | API Service Tag | `haproxy` label |
| ------------ | --------------- | --------------- |
| <%= SERVICE_NAME_SHORT %> | `<%= API_SERVICE_TAG %>` | `<%= HAPROXY_LABEL %>` |

### SLO Performance (14d Rolling)

> This section includes dashboard links to service-specific panels from [Grafana](http://grafana.vfs.va.gov/)

- :bar_chart: [**14d SLI Dashboard**](<%= GRAFANA_URL.call(HAPROXY_LABEL) %>)

##### Helpful Links

- :link: [Integration Details](<%= DEVOPS_URL.call(SERVICE_NAME_SHORT) %>)
- :link: [`vets-api/`](<%= API_INTEGRATION_0 %>)

![screenshot.png](./screenshots/<%= HAPROXY_LABEL %>_slo_screenshot.png)

## SLIs and SLOs

- The SLO is measured over a 14 day rolling window at a minimum one hour interval.
- Currently SLOs are measured for service-level. Eventually these will be enforced per-endpoint.

| Category         | SLI                                                                                                                                                                | SLO                                                                           |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
| Availability  | The proportion of successful HTTP requests as measured by the `haproxy` metrics. <br /><br />Any HTTP status other than 500-599 is considered successful.          | <%= AVAILABILITY %> success                                                                |
| Latency          | The proportion of sufficiently fast requests. <br /><br /> "Sufficiently fast" is defined as < <%= L99_LATENCY %>ms, <%= L90_LATENCY %>ms,  <%= L50_LATENCY %>ms as measured by the `haproxy` metrics.<sup>1</sup> | <ul><li> 50% of requests < <%= L50_LATENCY %>ms <li>90% of requests <%= L90_LATENCY %>ms</li> <li> 99% of requests < <%= L99_LATENCY %>ms</li></li></ul> |


## Rationale

Availability and latency SLIs are based on measurements of average request-response timings.

Availability SLOs were rounded down to the nearest 100ms and latency SLO timings were rounded up to the nearest 100ms.

All other numbers were picked by the author and the services were verified to be running at or above those levels.

**No attempt has yet been made to verify that these numbers correlate strongly with user experience.**


## Error Budget

> Each objective has a separate error budget, defined as 100% minus (–) the goal for that objective. For example, if there have been 1,000,000 requests to the API server in the previous four weeks, the API availability error budget is 3% (100% – 97%) of 1,000,000: 30,000 errors.

> We will enact the error budget policy (see [Example Error Budget Policy](https://landing.google.com/sre/workbook/chapters/error-budget-policy/)) when any of our objectives has exhausted its error budget.


## Clarifications and Caveats

- [1]: These SLIs are using metrics from `breakers` because current `fwdproxy` configurations do not allow for endpoint-level resolution to be analyzed.
-  Request metrics are measured at the forward proxy. This measurement may fail to accurately measure cases where user requests didn’t reach the forward proxy.
-  We only count HTTP 5XX status messages as error codes; everything else is counted as success.

----

> __This document was autogenerated on <%= DATE %>__
