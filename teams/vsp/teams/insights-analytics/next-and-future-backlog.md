## Google Analytics Next + Future

### Context
- These are items that the Analytics and Insights team should consider pulling into future sprints as we continue our progression to become more of an all-encompassing 
data platform for VA.gov
- With Google Analytics still serving as the primary data source for our KPI Dashboarding, it is imperative we continuously analyze and strategize means for 
improving our data collection, quality, and integrity in the short and long term

### Items to Consider

- [ ] Completely deprecate our OPIA Property
- [ ] Delete all remaining test production views
- [ ] Continuously iterate on standardizing more design system components and making adjustments as new props for existing components are introduced
- [ ] Further expand standardized analytics according to liquid templates -- design data layer around the purpose of each template and components within
- [ ] Develop content grouping around structured data models -- i.e Schema.org
- [ ] Expand and update cross domain tracking according to most necessary domains
- [ ] Refactor GI Bill Comparison tool and Facility Locator Search to have same specification for search
- [ ] Audit existing how to wizards for standardized specification --> deploy standardized spec to all wizards
- [ ] Completely eliminate "Product Used" custom dimensions and repurpose for more generalized universal purposes
- [ ] Create Google Analytics views for family member benefits and careers and employment
- [ ] Collect data directly from Search.gov backend into BigQuery
- [ ] Implement globalized GTM tracking for browser language translation -- standardize language ingestion
- [ ] Phase out unnecessary URL query parameters 
- [ ] Discovery around heat mapping and session recording tools
- [ ] Integrate Google Search Console and Bing Webmaster Tools into BigQuery
- [ ] Investigate why we’re still seeing pages with UTM parameters within URLs with anchors -- allowAnchor is enabled by default yet we’re still seeing `utm_campaign` within some page URLs

Description of Item | Current State / Advantages / Wins | Level of Effort | Scope Description 
| -- | -- | -- | -- |
Completely deprecate our OPIA Property | Free-up utilzation for more important events / hit | Low | Coordination with Josh Tuscher to confirm no one is using this data <br> delete tags in GTM 
Delete all remaining test production views | Maintaining a clean Google Analytics instance | Low | Moving each to trash can at the view level
Continuously iterate on standardizing more design system components and making adjustments as new props for existing components are introduced | Same benefits as the initiative as whole -- reduced time per implementation, expanded analytics capabilities site-wide | Medium to High | • Similar scope to prior design system standardization tickets <br> • In situations where a completely new component is introduced = higher effort <br> • In situations where we are simply adding an additional piece of metadata to an existing component = medium effort 
Liquid Template Analytics | • As more teams are focused on rapid content deployment and using Drupal liquid templates, this gives us the opportunity to further customize our data layer according to content purposes and standardize apart from design system components (since design system components are not leveraged within these templates) | Medium to High | • Would recommend meeting with CMS team who designs these liquid templates, understanding their common purpose for content developers and aligning the data layer according to those purposes
Develop content grouping around structured data models -- i.e Schema.org | • In addition to our Benefit Hub and Products content grouping, this presents a unique opporutnity to group our content according to the structured data models contained on the site and think about VA.gov according to this data model | Medium to High | • Discovery / meetings around current schema.org models live today <br> • Setting various levels of specificity that scale our understanding of this content across the site for folks who would benefit most from seeing content broken down in this manner 
Expand and update cross domain tracking according to most necessary domains | • Ensure sessions are not "reset" when users hop from one relevant subdomain on VA.gov to the next • Ensures common session-based metrics remain accurate and are not "double counted" in these scenarios | Low to Medium | • Get a comprehensive list of the latest subdomains of VA.gov where we want cross-domain tracking <br> • Update our existing Google tag manager cross-domain tracking with these subdomains, QA + deploy
 Refactor GI Bill Comparison tool and Facility Locator Search to have same specification for search | Allows us to further standardize our BigQuery search data to include this data <br> • Maintain consistency across our methodology for tracking search site-wide | Medium | • Work with FE to deploy our [search data layer](https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/analytics/google-analytics/tracking-search.md) on the relevant locations, shoudl require minimal GTM changes 
Audit existing how to wizards for standardized specification --> deploy standardized spec to all wizards | • Ensure consistency and standardized analytics tracking across all how to wizards <br> • Minimal GTM changes when future how to wizards are implemented | Medium | • Determine all existing how to wizards and update with [how to wizard data layer](https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/analytics/google-analytics/tracking-how-to-wizards.md) • Bake our analytics data layer into the library where how to wizards are originated
Completely eliminate "Product Used" custom dimensions and repurpose for more generalized universal purposes | • Free up a few dozen custom dimensions for other purposes <br> • These dimensions no longer serve much purpose as they articulate much of the same information that is now available with our content groupings | Low | • Mark these custom dimensions as "unused" <br> • Repurpose for other purposes that are more universally relevant or specific for application cusotmizations 
Create Google Analytics views for family member benefits and careers and employment | • Maintaing a clean google anlaytics instance <br> • Allows traffic to be understood directly in google analytics with the scope of these page directories simarily to other views | Low | • Setup google analytics views with filters explicitly for page paths beginning with `/career-employment` and `/family-member-benefits`
Collect data directly from Search.gov into BigQuery | • While our tracking for search is great, search.gov does have some analytics within their platform that are also centered around apps that leverage search.gov - keywords, click thru rates, impressions, etc | Medium to High | • Get authorization token for search.gov backend analytics <br> • Setup cloud function code to routinely execute to pull this data into BigQuery <br> • Join this data within our existing search tracking data to unveil potentially new insights
Implement globalized GTM tracking for browser language translation -- standardize language ingestion | • While we have tracking in those locations where there is a button or link to do so on the page...Currently we have very little knowledge to know if the user has translated the language of the page using the browser tools, it would be great to work with front end to listen for these tranlations, fire a data layer event and standaridize this site wide | Medium | • Work with front end to determine how we might setup an event listener to listen for browser translation, push a data layer event, and proceed with our standard deployment cadence
Phase out unnecessary URL query parameters | • Help improve the cardinality within our page paths by eliminating query parameters that create cardinality that is unnecessary for interpretation and analysis <br> • Simplify reporting on page URLs within google analytics for users and maintain a cleaner GA instance | Medium to High | • Write a SQL query and execute in BQ to find most common query parameters on VA.gov <br> • Determine the purpose of these query parameters and their need for existence / role they play in understanding the page path <br> • If not needed, eliminate by adding the excluded URL parameters to relevant views in GA 
Discovery around heat mapping and session recording tools | • GA as a standalone product is not great at understanding precise user journeys (_it's not designed to be that type of tool_) <br> • Onboarding a session recording and/or heat mapping tool would allow UX designers and content developers to more closely see the actual mouse movements and click paths as a supplement to event tracking <br> • Would open the doors for more complex user engagement understanding and analysis and enhance the ability to content developers and designers to understand true user behavior | High | • Vendor seletion process similar to what we did when we onboarded DOMO and BigQuery, evaluating the pros and cons of dozens of available tools <br> • Go through government approval and purchasing of the tool <br> • Deploying the tool on all environments of VA.gov <br> • Provisioning access to folks over time
Integrate Google Search Console and Bing Webmaster Tools into BigQuery | • While we have Google Search Console data in Google Analytics, this data does not live in BigQuery at all <br> • There is a (known discrepancy)[https://www.searchenginejournal.com/google-search-console-google-analytics-data/358206/] between what folks will find within the Google Search Console portal directly and what GSC data lives in GA <br> • This would ensure consistency in data interpretation and analysis and bring the source of truth directly to all users and allow us to join with other data | Medium to High | • Setup authorization key for Google Search Console backend <br> • Setup cloud function to routinely ingest this data and merge with other data in BigQuery 
Investigate why we’re still seeing pages with UTM parameters within URLs with anchors | • `allowAnchor` is enabled by default yet we’re still seeing utm_campaign within some page URLs • This would elminate reports like [this](https://analytics.google.com/analytics/web/#/report/content-pages/a50123418w177519031p176188361/explorer-table.filter=utm_campaign&explorer-table.plotKeys=%5B%5D) where folks have mistakenly used an `#` instead of `?` in setting their UTM URL links | TBD - Medium to High | • It's unknown today why this is happening -- would recommend first identifying the most common referals where we are seeing and determining if we can replicate

