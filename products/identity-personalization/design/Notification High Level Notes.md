# Notification high level notes
Updated Jan. 2, 2025 - This page includes notes taken between 12/24/24 and 1/2/25, in preparation for a prospective My VA redesign. This page is incomplete.

## BE Services used currently:
Appeals (Caseflow API)
To get the user's appeals, the /v0/appeals endpoint is called.
This endpoint utilitizes the Caseflow API to retreive appeals for current user.
See the mock data for an example JSON response.

### Payments (Vets API)

To get the user's payments, the /v0/profile/payment_history endpoint is called.

{
  "data": {
    "attributes": {
      "payments": [
        {
          "pay_check_dt": "2017-12-29T00:00:00.000-06:00",
          "pay_check_amount": "$3,261.10",
          "pay_check_type": "Compensation & Pension - Recurring",
          "payment_method": "Direct Deposit",
          "bank_name": "NAVY FEDERAL CREDIT UNION",
          "account_number": "***4567"
        }
      ],
      "return_payments": [
        {
          "returned_check_issue_dt": "2012-12-15T00:00:00.000-06:00",
          "returned_check_cancel_dt": "2013-01-01T00:00:00.000-06:00",
          "returned_check_amount": "$50.00",
          "returned_check_number": "12345678",
          "returned_check_type": "CH31 VR&E",
          "return_reason": "Other Reason"
        }
      ]
    }
  }
}
### Claims (Vets API)
To retrieve the users claims data, the vets-api /v0/benefits_claims endpoint is called.

### Claim status (Lighthouse)
Lighhouse Claims Service is used to retrieve claims data.

Form Submission Status (Vets API Feature Flag)
Get Form Statuses - The request to send to Vets API is GET/v0/my_va/submission_statuses.


 "data": [
    {
      "id": "3b03b5a0-3ad9-4207-b61e-3a13ed1c8b80",
      "type": "submission_status",
      "attributes": {
        "id": "3b03b5a0-3ad9-4207-b61e-3a13ed1c8b80",
        "detail": "",
        "form_type": "21-0845",
        "message": null,
        "status": "received",
        "created_at": "2023-12-15T20:40:47.583Z",
        "updated_at": "2023-12-15T20:40:54.474Z"
      }
Errors
The Lighthouse Benefits Intake API returns different error response structures. Here are some examples:
{
  "errors": [
    {
      "status": 422,
      "detail": "DOC104 - Upload rejected by upstream system. Processing failed and upload must be resubmitted"
    }
  ]
}
{
  "message": "API rate limit exceeded"
}
{
  "title": "Internal server error",
  "detail": "Internal server error",
  "code": "500",
  "status": "500"
}

Vets-API Response
A successful response has these fields:
Field
Description
Source
id
The identifier of the submission for which a status was requested. It is generated by Lighthouse, and then stored in VA.gov.
VA.gov
detail
Only present if status is error. Plain language detailing of the error corresponding to the error code and the specific submission.
Lighthouse
form_type
The type of form.
VA.gov
message


Lighthouse
status
The current status of the submission.
Lighthouse
created_at
The submission record created in VA.gov
VA.gov
updated_at
The last time the submission status was updated.
Lighthouse


### Health Care (Vets API)
To display a user's upcoming appointments, the /vaos/v2/appointments endpoint is called.


To display a user's unread message count, the /v0/messaging/health/folders endpoint is called.

Z### Onsite Notifications
https://github.com/department-of-veterans-affairs/va.gov-team-sensitive/blob/master/products/identity-personalization/my-va/onsite_notifications/technical-overview.md

### Outstanding Debts (Vets API)
To get the user's payments, the /v0/debts endpoint is called.

To get the user's copays, the /v0/medical_copays endpoint is called.


Debt Management Center is the external system that provides the user's debts.
See DebtManagementCenter::DebtsService
VBS is the external system that provides the user's copay data.
See MedicalCopays::VBS::Service
Benefit application and form drafts (Vets API)
To get the enrollment status of a health care application, the /v0/health_care_applications/enrollment_status endpoint is called.
Vets-API Endpoint
Internal Endpoint
GET /v0/health_care_applications/enrollment_status
HCA EE SOAP Service
GET /v0/user
None. Does local db lookup


### Submitted applications and forms (Vets API)
Submitted applications with status data are fetched using a single vets-api endpoint, which also make calls to the Lighthouse Benefits Intake API.
For more architectural information on the vets-api implementation see the following document: https://github.com/department-of-veterans-affairs/va.gov-team-sensitive/blob/master/products/identity-personalization/my-va/form-status/backend_documentation.md
Endpoints
The following shows which which vets-api endpoints are used and which external services are used:
Vets-API Endpoint
External Service
GET /v0/my_va_submitted_applications
Lighthouse

See Swagger documentation for more information: https://department-of-veterans-affairs.github.io/va-digital-services-platform-docs/api-reference/#/my_va/getSubmissionStatuses

