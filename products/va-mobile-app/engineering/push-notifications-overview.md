# Push Notifications for VA Mobile app

## Features (push types)

* appointment reminders
* secure message arrived (future)
* claim status changes (future)
* prescription refill ready (future)

## Systems involved

### Mobile app team
* generate content for each notification (UX?)
* define push notifcation templates, deploy to VEText
* generate certificates
  * production certificates need to come from the VA App Store account (Apple)
  * get our app into the VA App Analytics team's Firebase (Google)
* VA Mobile prod | VA Mobile staging : two "apps" to configure with VEText

### Mobile app
* send device registration to API
* UX to opt-in to push - part of onboarding screens
* prompt for push permission
* UX to disable/re-enable push in Settings
* app handle deep links from notification payload

### vets-api
Proxy api calls to VEText

### VEText (API)
* template create/update/delete
* device registration
* get user preferences (on/off for device and push type)
* save user preferences
* intake for events that can lead to push (/send api)

### VAProfile (future)
In the future, store push notification prefs alongside SMS/email/snail mail prefs

### VA.gov (future)
Expose features related to push notifications:
* allow Veteran to choose push notification as part of prefs
* allow Veteran to un-register a mobile app installation (using device name as passed during registration)

### VANotify (future)
Not involved in mobile push notifications yet

![sequence diagram](push-notifications.png)

## Feature: appointment reminders

Upcoming appointment event generated by VEText.

## Feature: secure message arrived (future)

Secure message event generated by MHV (?). MHV would need to connect to VEText to publish the event.

## Feature: claim status changes (future)

Claim status change event generated by ???. That system would need to connect to VEText to publish the events.

## Feature: prescription refill ready (future)

Prescription events generated by ???. That system would need to connect to VEText to publish the events.
