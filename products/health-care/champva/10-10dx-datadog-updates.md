# 10-10DX DataDog Dashboard Updates Overview

Below is a list of the updated, migrated, or new widgets added to the [10-10D Extended DataDog dashboard](https://vagov.ddog-gov.com/dashboard/c2u-hkx-sdc/ivc-champva-10-10d-ohi-merged-form-dashboard).

## Count of 10-10d Extended Submissions

Displays the total number of 10-10D Extended submissions for the filtered time range.

- Data comes from `vets_api.statsd.api_rack_request`, filtered down to `source_app:10-10d-extended`, `controller:ivc_champva/v1/uploads`, `action:submit_champva_app_merged`, and `status:2*` (successful response)
- `api_rack_request` metric is published for each API call, for this widget only for 10-10dx submissions

## Count of 10-10D Extended OHI Forms

Displays the total number of OHI forms generated by 10-10D Extended submissions for the filtered time range.

- Data comes from a different metric, `vets_api.statsd.api_ivc_champva_form_10_7959c_rev2025_delegate_form_vha_10_10d`
- This metric is published for 10-10dx flows only on the `#submit_champva_app_merged` endpoint, per OHI form generated

## 10-10dx Supporting Docs Count

Displays the total number of attachments uploaded for 10-10D Extended submissions, without factoring in the generated OHI form(s), for the filtered time range

- Data again comes from `vets_api.statsd.api_rack_request`, filtered down to `source_app:10-10d-extended`, `controller:ivc_champva/v1/uploads`, `action:submit_supporting_documents`, and `status:2*`
- By counting uploads to `#submit_supporting_documents` we're only including documents such as birth certificates and medicare cards; generated OHI form can be added but isn't currently.

## Average Number of Attachments

Displays the average (total # of attachments / total form submissions) number of supporting documents per form submission for the filtered time range

- Data comes from `vets_api.statsd.api_rack_request` and filtering separately by source app and controller, but with formula A including `action:submit_supporting_documents` and formula B including `action:submit_champva_app_merged`
- Dividing `A / B` yields average number of documents per 10-10D Extended submission

## 10-10d Extended Submissions by Trace

Stacked bar chart displaying LOA (0, 1, and 3) submissions to 10-10D Extended with an added cumulative sum line for the filtered time range

- A separate metric is published `vets_api.statsd.api_ivc_champva_form_10_10d_0`, `..._1`, and `..._3` for each user's LOA; these are charted separately and stacked in bars
- Cumulative sum line counts total submissions over the time range based on rack request metrics
- Y-axis is logarithmically-scaled so the bars aren't hidden in comparison to the total submissions

## Submit Errors (500s) (Upload)

Displays the ratio of 500 errors to successful responses for final 10-10D Extended form submissions for the filtered time range.

- Rack requests again are used here for calls to `#submit_champva_form_merged` (formula B) but we add an additional filter for `status:5*` to count 500 errors (formula A)
- Final percentage is shown as `A / B * 100`

## Errors (Upload)

Displays the number of non-200 responses for final 10-10D Extended form submissions for the filtered time range.

- Similar to the above, but we count `!status:2*` in place of 5xx responses
- Final percentage again is shown as `A / B * 100`

## 10-10dx Submission Latency

Displays the latency in seconds from various sources in our pipeline for 10-10D Extended submissions for the filtered time range.

- Callback Duration refers to the callback API invoked by Pega when responding to a submission (not specific to 10-10d extended)
- IVC Upload Duration refers to the main form submission call for 10-10dx
- Pega Duration is the time between IVC creating a database record for the submission just prior to uploading the files to S3 and receiving the callback from Pega
	- Note: this number will spike when a missing status is resolved due to the large time difference between record creation and record cleanup

## 10-10d Extended submissions and submission Errors

These charts are not reliable, but should display a span entry for each successful and error transaction respectively.  

- The data for the submissions widget comes from rack requests and filtere down to  `resource_name:"IvcChampva::V1::UploadsController#submit_champva_app_merged"`, `service:veteran-ivc-champva-forms`, and `status:ok`
- Similarly for the error chart, we filter the same except for `!status:ok`
- The spans don't seem to reliably display, so the widgets are being investigated.

## 10-10dx OHI vs Standalone Trends

Displays the number of OHI form submission from the standalone form as well as from 10-10D Extended with trend lines overlaid for the filtered time range.

- OHI submissions are gathered and charted using the `api_ivc_champva_form_10_7959c_rev2025_delegate_form_vha_10_10d` and `vets_api.statsd.api_ivc_champva_form_10_7959c_yes` metrics for 10-10D Extended and OHI Standalone forms, respectively.
- Trend lines are generated using built-in DataDog functions from the same data.

## 10-10dx Day-to-day Submissions

Displays the total daily submissions each day for 10-10D Extended for the last month.

- Data comes from the rack requests and filtered to `action:submit_champva_app_merged`
- Ideally this chart can be used to spot significant anomalies in submission rates

## 10-10d Original vs. Extended Submissions + Trend

Displays the number of 10-10D Standalone and 10-10D Extended submissions and trend lines for each for the last month.

- Data also comes from rack requests and filtered to the respective `source_app` of `10-10d` or `10-10d-extended`
- Trend lines generated from the same data

## 10-10dx vs 10-10d + OHI Supporting Docs Trend

Displays the supporting document counts for 10-10D Extended versus 10-10D Standalone plus OHI Standalone for the last month with a trend line of the sum of all three metrics.

- Three metrics are generated and two are displayed:
	- count of rack requests for 10-10D Extended supporting document uploads, and
	- count of rack requests for 10-10D Standalone + OHI Standalone supporting document uploads
- The idea here is to show the number of supporting documents uploaded with the new flow (10-10DX) versus the old (10-10D + OHI)
- The trend line sums all three metrics for a total supporting documents count for either flow, with the notion that we should be seeing a downward trend (which as of writing this, we do)
