# IVC/VES Acceptance Testing Plan
Updated: 1/8/2025

## Context
Integrated Veteran Care Civilian Health and Medical Program of the Department of Veterans Affairs (IVC CHAMPVA) forms hosted on VA.gov currently submit to the PEGA system.
Moving forward, there is a need to integrate with the Veteran Enrollment System (VES) for submissions of IVC CHAMPVA forms 10-10d and 10-7959c.

This document contains acceptance testing documentation for the initial implementation of that integration.

## Contents
- [Scope and Objectives of this Document](#scope-and-objectives-of-this-document)
- [Acceptance Tests](#acceptance-tests)
- [Relevant links](#relevant-links)

## Scope and Objectives of this Document

The scope of this document is limited to describing the high level expected behavior of a successful IVC/VES integration. Its objective is to streamline the development of this integration by setting out preliminary functionality/behavior goals.

**What this document is:** 
- a high-level plan detailing expected behavior of a successful IVC/VES integration in its minimum viable state.
- a guide meant to help direct development and improve team shared understanding

**What this document is not:** 
- an in-depth, exhaustive list of individual unit test cases that must be created
- set in stone

### Testing Methods

The methods used to test this MVP will be a combination of automated unit tests and manual user-acceptance testing performed in the VA.gov staging environment.

## Acceptance Tests

These acceptance tests are meant to serve as a guide when developing the real functionality and unit tests. They may also inform testers on which specific behaviors they ought to be paying attention to when testing the integration in a staging environment.

> [!NOTE]
> For every test that references a specific form (e.g., 10-10d), the same test and result should hold true for any other IVC forms that are submitted to VES (e.g., 10-7959c).

_Tests involving supporting documents have been ~~struck through~~ because VES does not actually handle supporting docs_

|Test No.|Test Description|MVP Behavior|
|-|-|-|
|1|A well-formed 10-10D with no attachments is submitted via vets-api to VES| An HTTP `200` response is received and the form submission continues as normal.|
|2|~~A well-formed 10-10D with a single attachment is submitted via vets-api to VES~~|~~An HTTP `200` response is received and the form submission continues as normal.~~|
|3|~~A well-formed 10-10D with multiple well-formed attachments is submitted via vets-api to VES~~|~~An HTTP `200` response is received and the form submission continues as normal.~~|
|4|~~A well-formed 10-10D with multiple attachments (a mixture of well-formed and malformed) is submitted via vets-api to VES~~|~~An HTTP `400` response is received and the form submission continues as normal.~~|
|5|A malformed 10-10D is submitted via vets-api to VES|An HTTP `400` response or similar error code is generated, form submission halts.|
|6|~~A well-formed 10-10D with a single malformed attachment is submitted via vets-api to VES~~|~~An HTTP `400` response or similar error code is generated, form submission halts.~~|
|7|A well-formed 10-10D is submitted via vets-api to VES while VES is unreachable|An HTTP `5XX` response is generated, form submission halts.|
|8|A 10-10D with number of applicants greater than the max allowed is submitted via vets-api to VES|An HTTP `4XX` response is generated, form submission halts.|
|9|A well-formed 10-10D is submitted via vets-api and is assigned a person UUID|person UUIDs are generated by vets-api and conform to the format expected by VES.|
|10|Access to the VES production endpoint without reliance on hardcoded credentials|VES API key is in AWS Param store and accesssible from vets-api.|

## Relevant Links
- [VES Swagger endpoint](http://dev.ves.va.gov/ves-vfmp-app-svc/swagger-ui/index.html) (must be on VA network to access)
- [IVC VES updated diagrams ticket](https://github.com/department-of-veterans-affairs/va.gov-team/issues/99823)
- [Existing IVC CHAMPVA engineering diagrams](https://github.com/department-of-veterans-affairs/va.gov-team/tree/master/products/health-care/champva/engineering)
- [Existing IVC PEGA architecture decision record for callback API](https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/products/health-care/champva/ADR-callback-api-to-receive-status-from-pega.md)
