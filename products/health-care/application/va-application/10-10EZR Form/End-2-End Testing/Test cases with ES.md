## End to End testing with Enrollment System
- Use this document to assist in coordinating tests between VA.gov and the Enrollment System (used by HEC staff).


### Resources
- Main POC: Joshua Faulkner via Slack within our team channel #1010-health-apps
- [Staging QA test cases](https://github.com/department-of-veterans-affairs/va.gov-team-sensitive/blob/master/Administrative/vagov-users/staging-test-accounts-1010EZR-Update-health-care-benefits.md)
- [MVP End-to-End testing ticket](https://github.com/department-of-veterans-affairs/va.gov-team/issues/70627)

### Test cases
#### Copay test already exists for previous year (financials already on file)
- #1 High Income - Financial data submitted when financials exist already (Means test already run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data is existing in ES (Coordinate with Joshua Faulkner)
          - Not married
          - No dependents
          - Gross Income $34,000
          - No Net Farm/business income
          - No other income
          - No deductibles or other expenses
          - No insurances
     - Expected Results:
          - Rx test run but no change, test user is over the income limit for Rx concessions.
          - Copay test not run, as there was financial data already on record.

- #2 High income - Financial & Insurance data submitted when financials exist already (Means test already run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data is existing in ES (Coordinate with Joshua Faulkner)
          - Not married
          - No dependents
          - Gross Income $15,000
          - Net Farm/business income $15,000
          - Other income $4,000
          - Medical deductible $1,000
          - College deductible $1,500
          - Funeral/burial deductible $2,000
          - Medicaid - Yes
          - Medicare - Yes, Eff date and 11 digit claim number M1234567890 added
          - Insurance Policy entered - A987654
     - Expected Results:
          - Rx test run but no change, test user is over the income limit for Rx concessions.
               - Even though the income was slightly different (same total at $34k, entered in different types)
          - Copay test not run, as there was financial data already on record.
          - Insurances added to record

- #4 Low Income - Financial & Insurance data submitted when financials already exist (Means test already run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data is existing in ES (Coordinate with Joshua Faulkner)
          - Not married
          - No dependents
          - Gross Income $15,000
          - Net Farm/business income $0
          - Other income $0
          - Medical deductible $500
          - College deductible $0
          - Funeral/burial deductible $0
          - No Medicaid
          - No Medicare
          - No Insurance Policy
     - Expected Results:
          - Rx test run and updated, test user is under the income limit for Rx concessions
          - Copay test not run, previous test on record
          - Insurances removed from record

- #3 High Income - Spouse, Dependent, Financial & Insurance data submitted when financials already exist (Means test already run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data is existing in ES (Coordinate with Joshua Faulkner)
          - Married, add spouse
          - Dependent, add child
          - Gross Income $15,000
          - Net Farm/business income $15,000
          - Other income $4,000
          - Spouse income $6,000
          - Medical deductible $1,000
          - College deductible $1,500
          - Funeral/burial deductible $2,000
          - Medicaid - Yes
          - Medicare - Yes, Eff date and 11 digit claim number M1234567890 added
          - Insurance Policy entered - A987654
     - Expected Results:
          - Rx test run but no change, test user is over the income limit for Rx concessions. (unsure of this outcome with spouse & dependent)
          - Copay test not run, as there was financial data already on record.
          - Spouse is added to record
          - Dependent is added to record
          - All Insurances are retained on record

---

#### Copay test does not exist for previous year (no financials on record)
- #7 High Income - Spouse removed (divorced/widowed), Dependent, & Financial data submitted when financials DO NOT exist (Means test not yet run for previous year)
     - Test user 40
          - Ensure user is showing as married, with at least one dependent, insurance exists, and all financial data has been removed from ES (Coordinate with Joshua Faulkner)
          - Divorced or widowed (no support provided)
          - Dependent, add child (same as before)
          - Gross Income $15,000
          - Net Farm/business income $15,000
          - Other income $4,000
          - Medical deductible $1,000
          - College deductible $1,500
          - Funeral/burial deductible $2,000
          - Medicaid - No
          - Medicare - No
          - Insurance Policy - No
     - Expected Results:
          - Rx test run but no change, test user is over the income limit for Rx concessions (unsure of this outcome with dependent)
          - Copay test is run, as there was no financial data on record.
          - Spouse is removed from record
          - Dependent is retained on record
          - Insurance is removed from record (unsure about this result)

- #5 High Income - Spouse, Dependent, Financial & Insurance data submitted when financials DO NOT exist (Means test not yet run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data has been removed from ES (Coordinate with Joshua Faulkner)
          - Married, add spouse
          - Dependent, add same child and a new child
          - Gross Income $15,000
          - Net Farm/business income $15,000
          - Other income $4,000
          - Spouse income $26,000
          - Medical deductible $1,000
          - College deductible $1,500
          - Funeral/burial deductible $2,000
          - Medicaid - Yes
          - Medicare - Yes, Eff date and 11 digit claim number M1234567890 added
          - Insurance Policy entered - A987654
     - Expected Results:
          - Rx test run but no change, test user is over the income limit for Rx concessions. (unsure of this outcome with spouse & dependent)
          - Copay test is run, as there was no financial data on record.
          - Spouse is added to record
          - New Dependent is added to record
          - All Insurances are added to record

- #7 High Income - Spouse removed (divorced/widowed), Dependent, & Financial data submitted when financials DO NOT exist (Means test not yet run for previous year)
     - Test user 40
          - Ensure user is showing as married, with at least one dependent, Insurance exists, and all financial data has been removed from ES (Coordinate with Joshua Faulkner)
          - Divorced or widowed (no support provided)
          - No Dependent
          - Gross Income $15,000
          - Net Farm/business income $15,000
          - Other income $4,000
          - Medical deductible $1,000
          - College deductible $1,500
          - Funeral/burial deductible $2,000
          - Medicaid - No
          - Medicare - No
          - Insurance Policy - No
     - Expected Results:
          - Rx test run and updated, test user is over the income limit for Rx concessions (unsure of this outcome with dependent)
          - Copay test is run, as there was no financial data on record.
          - Spouse is removed from record
          - Dependent is removed from record
          - Insurance is removed from record (unsure about this result)

- #5 Low Income - Spouse, Dependent, & Financial data submitted when financials DO NOT exist (Means test not yet run for previous year)
     - Test user 40
          - Ensure user is showing as not married, no dependents and all financial data has been removed from ES (Coordinate with Joshua Faulkner)
          - Married, add spouse
          - Dependent, add child
          - Gross Income $15,000
          - Net Farm/business income $0
          - Other income $0
          - Spouse income $0
          - Medical deductible $500
          - College deductible $0
          - Funeral/burial deductible $0
          - Medicaid - No
          - Medicare - No
          - Insurance Policy - No
     - Expected Results:
          - Rx test run is updated, test user is under the income limit for Rx concessions.
          - Copay test is run, as there was no financial data on record.
          - Spouse is added to record
          - Dependent is added to record
          - No Insurances are added to record
