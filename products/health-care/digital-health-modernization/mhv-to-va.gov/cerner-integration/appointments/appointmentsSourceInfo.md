# Appointment Sources Braindump

## Where do different apps get appointments from?

### Appointments on va.gov (VAOS) and VA Mobile App:

The current service providing VistA appointments is called VAOS-V2 and is hosted by Telehealth and Scheduling Platform (TaSP). VAOS-V2 provides a ‘FHIR-Like’ response but is not fully FHIR compliant. The [VAOS module in vets-api](https://github.com/department-of-veterans-affairs/vets-api/tree/master/modules/vaos) interfaces with VAOS-V2 and provides appointment data for both the Mobile App and Appointments on va.gov. The longer term plan has been for TaSP to deploy Enterprise Appointment Service (EAS) that will provide FHIR Appointments for VistA, Cerner and Community Care appointments. EAS has been continually delayed and there are current concerns with the ability to represent all the VA-Centric appointment data in a FHIR Appointment Resource.

To meet our timeline for Cerner Appointments on va.gov, the EAS team is instead going to include Read-Only Cerner appointments in the existing response from the VAOS-V2 service. The timeline for this is the first week of June 2023 for Staging, and September 2023 for Production (still determining why the delay in Prod release). Tentatively, Writes for Cerner appointments is scheduled for early 2024. There is a lot of leadership support pushing for EAS to deliver full capabilities for Cerner appointments as soon as possible, but overall confidence is currently low.

While the Cerner Read-Only appointments will be mapped and included in the existing response used by VAOS, there will still be work to do by the appointments team, including how we handle a Veteran that needs to modify an appointment at a Cerner site, and logic around identifying Cerner C&P appointments. Likely there will be other things that need to be worked on as well to ensure the mixed VistA/Cerner appointments work best for Veterans on va.gov. This is the [FHIR Mapping](./taspFhirMapping.png) currently being implemented by TaSP; OCTO has not had the opportunity to have input into this mapping yet.



### PCI and VeText

[Check In (PCI)](https://github.com/department-of-veterans-affairs/va.gov-team/tree/master/products/health-care/checkin) does not use any TaSP services for appointments. Instead, PCI uses a service the VeText team built called vista-api to read and write VistA data. vista-api is not FHIR based and returns a custom JSON object containing appointment and Veteran demographic data. There is current work happening to move VeText into AWS (VeText 2.0) that will support integration with Cerner for Appointments and other FHIR Resources. The current plan is that PCI will use an endpoint provided by VeText to Read/Write with Cerner appointments. Likely PCI will need to make two calls, one for VistA appointments and one for Cerner appointments, until VeText 1.0 is also migrated to AWS.

There is also check in related work happening to support MHV on va.gov and VA Mobile App; this work will happen in both the [Check-In vets-api module](https://github.com/department-of-veterans-affairs/vets-api/tree/master/modules/check_in) and in the [Check In Integration Point API (CHIP)](https://github.com/department-of-veterans-affairs/chip). The current PCI workflows do not require a Veteran to be fully authenticated; instead we built a service called [LoROTA](https://github.com/department-of-veterans-affairs/lorota) that utilizes VeText to send a unique link to a Veterans phone number on record. The Veteran then enters their lastName and dateOfBirth to verify their identity. Due to this low risk authentication workflow, there is not currently support for processing check-ins from a fully authenticated Veteran. The PCI team is [currently working](https://app.zenhub.com/workspaces/check-in-experience-61fc23a2cb8a14001132e102/issues/gh/department-of-veterans-affairs/va.gov-team/58451) on providing that functionality.

### Other Appointment-y Information

One of the primary drivers for EAS has been support for Provider Based Scheduling (PBS). In VistA, a Clinic is a schedulable resource, and that clinic may or may not have a specific provider associated with it. Additionally, there are different clinics required to represent Telehealth and Video appointments. In modern EHRs it is customary to be able to schedule an appointment with a specific provider, and likely be able to select the modality (in-person, telephone, etc). EAS plans to support PBS by duplicating the VistA appointment data into an external data store that allows mapping of providers, clinics, and available time slots, all while keeping that data in sync with the VistA data; this will only be possible if all writes to any VistA appointment occur through EAS. This is important to us as at some point in the future the VeText VistA integration may be mandated to migrate to use EAS; this was already attempted in early 2023 and was put on hold due to overwhelming pushback from various teams across VA (or possibly for other reasons, not really sure).
